extends layout

block head
  title Editing #{name}
  link(rel='stylesheet', href='/stylesheets/edit.css', type='text/css')
  link(rel='stylesheet', href='/stylesheets/twoPane.css', type='text/css')
  link(rel='stylesheet', href='/stylesheets/edit.css', type='text/css')
  link(rel='stylesheet', href='/stylesheets/iThing.css', type='text/css')

block content
  div.left-pane
    div#video-container
      div#current-lyrics
    div#timebars-container
      div#timebar
      div#detail-timebar
        div#detail-timebar-seeker
          div#time-marker
        table(id='range', width='100%', cellspacing='0', cellpadding='0')
          tr
    div#line-data
  //- TODO class + ID is unncessary here
  div#lyrics.right-pane
    table

  script(src='/javascripts/jquery-2.1.1.min.js')
  script(src='/javascripts/jquery-ui-1.10.4.min.js')
  script(src='/javascripts/jQRangeSlider-min.js')
  script(src='/javascripts/colResizable-1.3.source.js')
  script(src='/javascripts/underscore.js')
  script(src='/javascripts/Utility.js')
  script(src='/javascripts/SongModel.js')
  script(src='/javascripts/LyricsController.js')
  script(src='/javascripts/TimebarController.js')
  script(src='/javascripts/DetailTimebarController.js')
  script(src='/javascripts/VideoController.js')
  script(src='/javascripts/LineDataController.js')
  script(src='/javascripts/SaveController.js')

  script.
    $(function() {
      console.log('AYOGG');
      window.songModel = songModel(!{songJSON}); // set up the model
      // TODO this shouldn't be here and in SaveController
      setInterval(function() { 
        songModel.setTime(videoController.getTime());
      }, 50);
    });
